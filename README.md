# Britbox React Native App

Develop a mobile app with React Native using TypeScript and Redux (Redux Saga).

Components based in Storybook framework.
`src/components/*`

- [Storybook](https://storybook.js.org/)

- `yarn storybook` or `npm run storybook`

Enable or Disable storybook on `src/navigation/routes.ts`

```js
const STORYBOOK_START = true && __DEV__;
```

### **Please check all the components and if necessary create a new one always thinking of reusing it throughout the app.**

## Player show only VPN - USA or CA

## Things already configured

- [Axios](https://github.com/axios/axios) (Rest Client)
- [Redux](https://es.redux.js.org/)
- [Redux Saga](https://redux-saga.js.org/)
- [ESLint](https://eslint.org/)
- [Prettier](https://prettier.io/)
- [Jest](https://jestjs.io/)
- [Styled Components](https://www.styled-components.com/)
- [i18n Internalization](https://react.i18next.com/)

## How to configure this project

- `npm install -g react-native-cli`
- Install all packages Npm or Yarn inside folder:
  - `npm install` or `yarn install`

### Folder structure

- src
  - components **[common or shared components]**
  - screens
    - nameScreen
      - [index](#routing) **[use index by routing]**
      - styles **[use styled components]**
  - [store](#states)
    - nameState
      - [name-actions](#actions)
      - [name-reducer](#reducer)
      - [name-saga](#saga)
  - locales
    - code
      - file.json **[json file used to translations]**
  - services **[common services and instances clients rest and graphql]**
  - utils
- assets
- [typings](#typings)

### Routing example

```js
import { createStackNavigator } from 'react-navigation';
import Home from './Home';

const AppNavigator = createStackNavigator({
  Home: { screen: Home },
});

export default AppNavigator;
```

### States

Use this folder to save state redux

- Reducer

  ```js
  import { reducerWithInitialState } from 'typescript-fsa-reducers';
    import { sampleActions } from './sample-actions';

    export interface SampleState {
      text: string;
    }

    export const initialState: SampleState = {
      text: 'initial value'
    };

    export const sampleReducer = reducerWithInitialState(initialState)
      .case(sampleActions.fetchSamplesAsync.done, (state, payload) => {
        return Object.assign({}, state, {
          text: payload.result.text
        });
      })
      .case(sampleActions.fetchSamplesSync, (state, payload) => {
        return Object.assign({}, state, {
          text: 'new value generated by synchronized action'
        });
      });
  ```

- Actions

  ```js
  import actionCreatorFactory from 'typescript-fsa';

  const actionCreator = actionCreatorFactory('SAMPLE');

  export const sampleActions = {
    fetchSamplesAsync: actionCreator.async<{}, { text: string }>('FETCH_SAMPLES_ASYNC'),
    fetchSamplesSync: actionCreator<{}>('FETCH_SAMPLES_SYNC')
  };
  ```

- Saga

  ```js
  import { put, takeLatest } from 'redux-saga/effects';
  import { toggleLoading } from './action-actions';
  import { ActionTypes } from './action-types';

  export function* loadRequest(action: any) {
    try {
      const { file } = action.payload;

      yield put(toggleLoading());

    } catch (error) { }
  }

  export function* coreSagaWorkers() {
    yield takeLatest(ActionTypes.ACTION_ENUM, loadRequest);
  }
  ```

### Typings

Use `./typings` folder to save types definitions

### Theme

In `states/theme/theme.ts` you can change hexa colors and configure many theme aplications

#### Recommended plugins and extensions to development

- [Visual Studio Code](https://code.visualstudio.com/)
- [React Native Full Pack](https://marketplace.visualstudio.com/items?itemName=kelset.rn-full-pack)
- [EditorConfig](https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig)
- [Prettier](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)
- [Reactotron](https://github.com/infinitered/reactotron)

<!-- ## Notifications with One Signal

- [One Signal](https://onesignal.com/) -->

<!-- ## Build by App Center and CD staging and production

- [App Center](https://appcenter.ms) -->

### *** Eslint required before each commit

- `yarn lint` or `npm run lint`

## Evergent SDKs

- Account: `src/sdks/Britbox.API.Account.TS/`

- Content: `src/sdks/Britbox.API.Content.TS/`

- Search: `src/sdks/Britbox.API.Search.TS/`

### Generate [Swagger](https://swagger.io/) documentation skds

- Go to `src/sdks/Britbox.API.Account.TS/`

```
npm install -g redoc-cli
redoc-cli bundle -o index.html swagger.json
```
